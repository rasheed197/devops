# SSH KEY EXCHANGE

In the previous lecture we were able to do a remote execution using `ssh`

```
$ ssh devops@web01 uptime
```

The problem with this command is that everytime we run it , it asks us for password, because of course we need to provide the authentication, but there's also one more way to login, which is key-based. We are doing password vased login, but the key based are considered as the safer login. 

For that all you have to do is run the command `ssh-keygen`, which will generate the keys.

```
$ ssh-keygen
```

So it's key pair and it stores the key at `/root/.ssh/`

`/root/.ssh/id_rsa`: private key

`/root/.ssh/id_rsa.pub`: public key

So it's like lock and key. The public key is the lock and the private key is the key to open the lock.

So we will put the lock (public key) on `web01`, `web02`, `web03`. To do that we'll do 

```
$ ssh-copy-id devops@web01

$ ssh-copy-id devops@web02

$ ssh-copy-id devops@web03
```

So it will take the lock (public key) and apply it to the 3 servers.

Now if we try the remote execution again, it will not ask for password, instead it will login using the key.

```
$ ssh devops@web01 uptime
```

Now, the way it works is in your home directory `/root`, you have the `.ssh`

```
$ ls /root -a

#OUTPUT
...   ..ssh   ...
```

In the `.ssh` you have the private key `id_rsa`, 

```
$ ls /root/.ssh -a

#OUTPUT
...  id_rsa  id_rsa.pub
```
if your key name is `id_rsa`, it becomes your default login key. By default, what it's doing is 

```
$ ssh -i .ssh/id_rsa devops@web01 uptime
```

So it's using this key `.ssh/id_rsa` to login to the `web01` machine, and execute our command. So it's default we don't have to specify it.

But if for some reason you changed your private key from `id_rsa` to let's say `private_key`, then you have to specify it when running your command, like so

```
$ ssh -i .ssh/private_key devops@web01 uptime
```







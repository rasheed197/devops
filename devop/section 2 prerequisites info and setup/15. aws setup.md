# AWS SETUP

1. AWS Acount Setup
2. Login Security
3. Billing Alarm
4. Certificate setup (Create a certificate for our domain)

## 1. AWS Acount Setup
Creating account (root user)
```
aws.amazon.com/console
```

## 2. Login Security
Securing our login details with AWS account
### IAM
- Create alias
- Create user (e.g itadmin)
- Multi Factor Authentication MFA - For both root and IAM user

### Note 
- Log out of root user and login with IAM user and reset your password
- Make sure you always use the IAM user to conduct all AWS activities except for billing, managing IAM user, and support

## 3. Billing Alarm
- So we don't accidentally consume any paid service in AWS
- In case you make such mistake, you get a billing alarm and you can clean your resources
- Login as root user
- Go to "CloudWatch"

### What is CloudWatch?
- CloudWath is a monitoring service of AWS
- It can monitor all the resources that you're using on your AWS account
- It also monitors your bill, and you can set alarm on this metrics.
- If certain metrics cross a certain limit, you get notified through email
- AWS also sends you notification for free tier, if you are crossing the free tier limits

### Setting up Billing
- Go to the `Billing and Cost Management` dashboard in the AWS Console. Scroll down and click `Billing Preferences`
    - Enable `PDF invoice delivery by email`

- Edit "Alert Preferences" 
    - Enter your email address
    - Enable "Recieve CloudWatch billing alert"

- Go back to "CloudWatch"
    - Go to "All alarms"
    - Click "Create alarm"
    - Click "Select metric" then "Billing" then "Total Estimated Charge"
    - Select the currency
    - Click "Select metric"
    - Scroll down and select "Greater/Equal"
    - Enter the amount below then click "Next"
    - Select "In alarm" then "Create new topic"
    - Enter the topic (e.g AdminEmail) and email address
    - Click "Create topic"
    - Scroll down, then click "Next"
    - Add an alarm name (e.g BillingAlarm) then click "Next"
    - Scroll down the click "Create alarm"

- Go to the inbox of the email you provided and click "Confirm subscription"
- Click on the "BillingAlarm"
- Find the "Actions" tab, and you should see the 'Notification' is enabled

## Note
- The word "CONSOLE" in AWS means the 'Web Interface', the one that you access from the browser and you can manage all you AWS resources from that.

## 4. Certificate setup
- Go to "Certificate Manager"
- You can request a certificate, but you are also allowed to store certificate you created from somewhere else.
- Click "Request a certificate"
- Select "Request a public certificate" and click "Next"
- Public certificate is FREE, private is NOT
- You have to provide your domain name in the format
```
*.your_domain.xyz
```
- Scroll down and select "DNS validation" in Validation method
- Scroll down and click "Request"
- Right now the Status is showing "Pending validation"
- In order to validate we need to add a record in our domain
- This is called the CNAME record, a name mapping to another name.
- In your GoDaddy, go to "Domain", click on the "DNS" tab
    - Click on "Add New Record"
    - Fill the following
        - Type: CNAME
        - Name: ["CNAME name" in your aws certificate record without the ".domain_name" at the end]
        - Value: ["CNAME value" in your aws certificate record without the ".domain_name" at the end]
    - Click on "Save"
    - Make sure you don't touch any of the other records there.
- After completing this, it will take 48 hours for status to be validated





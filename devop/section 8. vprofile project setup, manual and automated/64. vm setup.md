# VM SETUP

Go to this url 

```
github.com/hkhcoder/vprofile-project
```

This is the source code for our project. Clone the repo using VSCode or git bash at location **/c/hkhcoder/**. Now you need to switch the brain. In your VSCode at the bottom left, click where it says **main** then select **origin/local**. 

Click on the folder **Manual_provisioning_...** based on your operating system, and follow the steps on the PDF file inside.

Firstly install the vagrant plugin.

If you look in the **Vagrantfile** you will see it's a multi VM Vagranfile. We have **DB**, **Memcache**, **RabbitMQ**, **Tomcat**, and **Nginx** VM. We also have two global settings.

```
config.hostmanager.enabled = true
config.hostmanger.manage_host = true
```

Before creating the VMs, make sure there are no active VMs on your machine, if there are any, destroy it.

```
#check for active vm
$ vagrant global-status

#delete the vm
$ vagrant destroy
```

### Create the VMs 

**windows and Linux user**

```
$ cd /c/hkhcoder/vprofile-project/vagrant/Manual_provisioning_WinMacIntel

$ vagrant up
```

**Mac user**

```
$ cd /c/hkhcoder/vprofile-project/vagrant/Manual_provisioning_MacOSM1

$ vagrant up 
```

If you see any error like timeout or any other error, just do

```
$ vagrant reload [VM NAME] #OR

$ vagrant reload

#after reload do
$ vagrant up
```

Login to web01
```
vagrant ssh web01
```

We also have a nice entry created automatically by vagrant
```
$ sudo -i

$ cat /etc/hosts

#OUTPUT
...

### vagrant-hostmanager-start
192.168.56.12    app01
192.168.56.15    db01
...

### vagrant-hostmanager-end
```

The host file of any computer works like this. If you try to access a machine with the name **app01**, it's going to look for its IP. First it's going to look for the IP in the hosts file **/etc/hosts**, if it's not there, then it's going to look in the DNS of your ISP

Send four packets to app01

```
ping app01 -c 4
```

If you get a response back, that means we're able to connect to that machine, else you need to reboot the app01 machine.

Vagrant added this entry by using the vagrant host manager plugin we installed, and the global settings we added to our Vagranfile 

```
config.hostmanager.enabled = true
config.hostmanger.manage_host = true
```

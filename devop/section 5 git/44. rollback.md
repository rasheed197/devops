# ROLLBACK 

There are different stages where you can rollback
1. Before going into staging or commit area
2. If you're in the staging area, but you haven't commited your changes
3. After commiting your changes

### 1. BEFORE GOING INTO STAGING OR COMMIT AREA

```
HP@DESKTOP-OMEFLDD MINGW64 /c/gitrepos/titanwork (main)
$ ls

jupiter/  nebula/  pluto/  saturn1.py  saturn10.py  saturn2.py  saturn3.py  ...
```

Edit saturn2.py
```
$ vim saturn2.py

#CONTENT
Rollback before stahing area
Using the git checkout
Hello world
```

View the content of the file saturn2.py
```
$ cat saturn2.py

Rollback before stahing area
Using the git checkout
Hello world
```

See the difference in the files that you've changed
```
$ git diff
```

Rollback your changes
```
$ git checkout saturn2.py

Updated 1 path from the index
```

View the content of the file saturn2.py. There will be nothing in the file anymore
```
$ cat saturn2.py
```

### 2. IF YOU'RE IN THE STAGING AREA, BUT YOU HAVEN'T COMMITTED YOUR CHANGES

Edit saturn2.py
```
$ vim saturn2.py

#CONTENT
Rollback before stahing area
Using the git checkout
Hello world
```

View the content of the file saturn2.py
```
$ cat saturn2.py

Rollback before stahing area
Using the git checkout
Hello world
```

Stage your changes
```
$ git add saturn2.py
```

See the difference in the files that you've changed. After staging "git diff" will no longer work, you have to use "git diff --cached"
```
$ git diff --cached
```

Rollback your changes
```
$ git restore --staged saturn2.py
```

### 3. AFTER COMMITTING YOUR CHANGES

Edit saturn2.py
```
$ vim saturn2.py

#CONTENT
Rollback before stahing area
Using the git checkout
Hello world
```

View the content of the file saturn2.py
```
$ cat saturn2.py

Rollback before stahing area
Using the git checkout
Hello world
```

Stage and commit changes
```
$ git add saturn2.py

$ git commit -m "commit level"
```

View all commits
```
$ git log --oneline

5ca26d9 (HEAD -> main) commit level
6637eeb (origin/main, origin/HEAD) new moons
fd76046 saturn moons
cc6ff8f first file commited
```

See the difference in the files that you've changed. After committing, you've to the previous and current commit id
```
$ git diff 6637eeb..5ca26d9
```

Rollback your changes
```
$ git revert HEAD
```

HEAD is that pointer which is currently pointing to the current commit ID (when we ran "git log --oneline"). So when we say "git revert HEAD", it's going to back to the previous commit. It will also ask you for revert message in vim editor, you can save the default or just change it to whatever message you like.

If you run the "git log --oneline" command again after reverting, you should actually see a new commit, that's actually for revert.
```
$ git log --oneline

39b4e53 (HEAD -> main) Revert "commit level"
5ca26d9 commit level
6637eeb (origin/main, origin/HEAD) new moons
fd76046 saturn moons
cc6ff8f first file commited
```

Note that the content in commit ID 39b4e53 is similar to commit ID 6637eeb. We wanted to roll back to commit 6637eeb but it created a new commit 39b4e53 with same content.

So when you revert it is also going to store the history of what changes you made. But if you don't want to store any history whatsoever, the you can use the "git reset --hard" command and you provide the commit ID you want to go back to, which in our case is commit 6637eeb.
```
$ git reset --hard 6637eeb

HEAD is now at 6637eeb new moons
```

Now if you the view all our commit, we are now back at commit 6637eeb, and all the commit that were after commit 6637eeb will be removed. So we no longer have commit 5ca26d9, and commit 39b4e53 in our git log.
```
$ git log --oneline

6637eeb (HEAD -> main, origin/main, origin/HEAD) new moons
fd76046 saturn moons
cc6ff8f first file commited
```

So "git reset --hard" is a more direct way of a rollback, if you don't want to store the history. 

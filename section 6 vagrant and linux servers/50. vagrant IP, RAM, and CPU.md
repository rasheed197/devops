# VAGRANT IP, RAM, AND CPU

Delete the VMs Ubuntu and CentOS using
```
$ vagrant destroy
```

### Set default terminal in VSCode
Inside of VSCode
- Windows user do <kbd>ctrl</kbd> + <kbd>shift</kbd> + <kbd>p</kbd>
- MacOS user do <kbd>command</kbd> + <kbd>shift</kbd> + <kbd>p</kbd>
- You should get a dialogue box at the top, you just have to type
```
> Terminal: Select Default Profile
```
- When you find it, click on it and select your default terminal. Select GitBash for Windows, MacOS don't select anything your default terminal is terminal.
- So when we execute command from VSCode it will going to execute on git bash terminal.
- So we are going manage our vagrant file from VSCode editor, so we need one extension.
- Install the extension **Vagrantfile Support** from VSCode
- Open the folder where we hanve our vagranf file on VSCode **/c/vagrant-vms**
- Now you should the two folders centos and ubuntu on VSCode
- Open the Vagrantfile for centos

### Now let's understand the vagrant syntax

- #: # is a comment
- The code starts as
```
Vagrant.configure("2") do |config|

...

end
```
- And every other code (i.e the settings) is placed in between, and they all begins with **config**
```
...
config.vm.box = "eurolinux-vagrant/centos-stream-9"
config.vm.box_version = "9.0.48"
...
```

- If you change the **config** to **devops** i.e  
```
Vagrant.configure("2") do |devops|
```

- The rest of the code also have to start with **devops**
```
devops.vm.box = "eurolinux-vagrant/centos-stream-9"
devops.vm.box_version = "9.0.48"
```

- So leave it as **config**

### SET THE NETWORK

- So let's say now we want to enable bridged adapter like we did in manual VM setup. Find the setting below and uncomment it.

```
config.vm.network "public_network"
```

Now you need to save the file and and restart or power on the VM, because only at boot time this settings will be applied
```
# restart
$ vagrant reload

# if the VM is powered of
$ vagranr up
```

- If you want to give your own IP address to your VM, uncomment this setting, and you can change the IP to whatever you like or leave it as is. This will be a static IP address (i.e it will remain unless you change it).
```
config.vm.network "private_network", ip: "192.168.33.10"
```

- With **config.vm.network "public_network"** your router will assign an IP address to your VM. It'll be a rabdom IP 

- So **config.vm.network "public_network"** will get a random IP to your VM while **config.vm.network "private_network", ip: "192.168.33.10"** will get the private static IP.

#### YOU CAN ALSO SET THE NETWORK TO USE BRIDGED ADAPTER
```
config.vm.network "public_network", bridge: "en0: Ethernet"
```

### SET THE RAM AND CPU

If you uncomment this line **config.vm.provider "virtualbox" do |vb|**

This starts a new code block, the main code block starts and ends from
```
Vagrant.configure("2") do |config|

...

end
```

**config.vm.provider "virtualbox" do |vb|** also creates a new code block inside the main code block.
```
config.vm.provider "virtualbox" do |vb|

...

end
```

So to set the RAM you need to uncomment this line
```
config.vm.provider "virtualbox" do |vb|
    vb.memory = "1024"
end
```

If you want to add extra cpu, you can add it inside
```
config.vm.provider "virtualbox" do |vb|
    vb.memory = "1024"
    vb.cpus = 2
end
```

- If you've setup copilot, you will notice it autocompletes for you 
- If you don't understand any line of code, you can highlight it, then do <kbd>command</kbd> + <kbd>i</kbd> for MacOS or <kbd>ctrl</kbd> + <kbd>i</kbd> for Windows and you should get copilot prompt. Type <kbd>/explain</kbd> and it will start explaining you the line you highlighted.

We can also use github copilot to write entire Vagrantfile. We'll provide information to it, and it will write its own Vagrantfile

### CREATE VAGRANFILE USING GITHUB COPILOT
- Create file Vagrantfile
- Do <kbd>command</kbd> + <kbd>i</kbd> for MacOS or <kbd>ctrl</kbd> + <kbd>i</kbd> for Windows, then type 

#### FOR MACOS
    Write Vagrantfile for box name [BOX NAME], use vmware_desktop provider. Memory 1 gb, cpu 2, static ip for private_network 192.168.56.17, staic ip for public_network bridged adator

#### FOR WINDOWS
    Write Vagrantfile for box name [BOX NAME], use virtualbox provider. Memory 1 gb, cpu 2, static ip for private_network 192.168.56.17, staic ip for public_network bridged adator

Now you just have to run the Vagrantfile to install and run the VM
```
$ cd path/to/Vagranfile

$ vagrant up
```

Once the VM is up you can ssh into and check if the info you provided were right

```
#ssh into VM
$ vagrant ssh

#become root
$ sudo -i

#check ip
$ ip addr show

#check memory
free -m

#check cpu
cat /proc/cpuinfo
```





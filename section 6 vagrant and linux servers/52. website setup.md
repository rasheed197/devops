# WEBSITE SETUP

In this lecture we'll be talking about server management. Hoew do we install and manage a server as service on a Linux OS

### WHAT WE'LL BE DOING
1. First we'll be setting setting up httpd service on CentOS and we'll deploy some HTML templates

2. Next we'll be using Ubuntu OS and we'll setup LAMP stack (Linux Apache Mysql, PHP) on that and deploy WordPress Template.

3. Then we'll automate this setup by using vagrant positioning.

### SETUP A WEBSITE ON CENTOS
1. Download template at **tooplate.com**. Use Brave browser to avoid marketting popups.

2. Make sure there aren't any VMs running. If there are delete them
```
$ vagrant global-status
```

3. Create folder in c drive and cd into it
```
$ mkdir /c/vagrant-vms/[project name]

$ cd /c/vagrant-vms/[project name]

#Example
$ mkdir /c/vagrant-vms/finance

$ cd /c/vagrant-vms/finance
```

4. Create Vagrantfile
```
#see list of all downloaded vagrant box
$ vagrant box list

#create Vagrantfile
$ vagrant init [BOX NAME]
```

5. Edit Vagrantfile using vim
```
$ vim Vagrantfile
```
Enable public_network, and private_network. Keep RAM as 1gb. Save and Quit.

```
#private network
config.vm.network "private_network", ip: "192.168.33.10"

#public network
config.vm.network "public_network"

#memory
config.vm.provider "virtualbox" do |vb|
    ...
    vb.memory = "1024"
end
```

Bring up the VM, login and switch to root user
```
$ vagrant up

$ vagrant ssh

$ sudo -i
```

change hostname
```
$ vi /etc/hostname

...Enter hostname

$ hostname [HOSTNAME]
```

Log out and then login again
```
$ exit

$ vagrant ssh
```

In order to set the HTML template, we need httpd service (for CentOS) or Apache2 service (for Ubuntu)

```
$ yum install httpd wget vim unzip zip -y
```
- We are going to download the HTML package using wget
- The template will be in zip format, so we use unzip to extract the template

Start the service

```
$ systemctl start httpd

$ syatemctl enable httpd
```

Check the IP address
```
$ IP addr show

#use any IP that starts with 192.168...
```

Test the IP on the browser. You should see a default httpd webpage.

```
http://[IP]

#Example
http://192.168.56.22
```

Create an index.html file in **/var/www/html/**
```
$ cd /var/www/html

$ vim index.html

#CONTENT
This is my first website setup
```

restart the httpd service
```
$ systemctl restart httpd
```

Refresh the browser, and you should see the index.html content.

Copy the download link of the HTML template from tooplate.com
- Open the console of the page
- Go to the **Network** tab
- Now click on the **Download** button 
- In the Network tab, click on the zip file and go to **Headers**
- You should see the download link in **Request URL**

Download the HTML template

```
$ cd /tmp/

wget [HTML TEMPLATE LINK]
```

Unzip the file
```
$ unzip [FILE NAME]
```

You should get a folder, navigate into the folder
```
$ cd [FOLDER NAME]

$ ls
```

You should see all the files in that folder including **index.html**. 

We want to copy all the files and folders in this directory to /vaw/www/html/

```
$ cp -r * /vaw/www/html/
```

Restart the httpd service
```
$ systemctl restart httpd
```

Before testing in browser make sure to confirm the following 

```
#httpd is running
$ systemctl status httpd

#all the files are in /vaw/www/html/
$ ls /vaw/www/html/

#firewall service isn't running
$ systemctl status firewalld
```

If you are running the CentOS VM on a Windows machine, firewalld will be inactive. But if you're running Fedora on Macwise, firewall will be active so you have to stop it and disable it so it doesn't come back up on boot time.

```
$ systemctl stop firewalld

$ systemctl disable firewalld
```

In real time, it's not a good practice to shut down firewalld. But for now we'll be shutting it down.

Now if you test it in your browser, you should see the website.

```
http://192.168...
```

Once you are done, power off and delete the VM
```
$ exit

$ vagrant destroy 
```







# AUTOMATE WORDPRESS SETUP

In this lecture we'll be writing vagrant file that can provision WordPress website automatically.

From the previous lecture **WORDPRESS SETUP**. Inside of VSCode make a copy of the VM rename it (e.g vm_nameIAC) and delete the **.vagrant** folder.

Open Vagranfile and change the **private_network** IP. Through provisioning we're going to run all the commands that we used to setup our website

We'll add our commands inside
```
config.vm.proision "shell", inline: <<-SHELL

    [COMMANDS HERE]

SHELL
```

#### HOW DO WE CREATE A FILE AND ADD CONTENT AUTOMATICALLY

```
cat > path/to/file <<EOF

[CONTENT HERE]

EOF
```

You also have to make some changes in the **mysql** command. Firstly remove the command **sudo mysql -u root**

Add **mysql -u root -e** before the mysql command

```
mysql -u root -e 'CREATE DATABASE wordpress;'

mysql -u root -e 'CREATE USER wordpress@localhost IDENTIFIED BY "admin123";'

...
```

Copy all the commands and paste them bellow

```
config.vm.proision "shell", inline: <<-SHELL

[COMMANDS HERE]

SHELL
```

Make sure installation tion commands ends with **-y** i.e

```
sudo apt install ... -y
```

Make sure there are no extra space at the end or beginning of **EOF**


Make sure to add **-y** to the of the **yum install ...** command, cause if it asks question during provisioning, provisioning will fail.

Go to git bash
```
$ cd /c/vagrant-vms/vm_nameIAC

$ vagrant up
```

Once this is done you can now visit the site on your browser
```
http://[IP]
```

If everything works fine, you can destroy the VM
```
$ vagrant destroy
```
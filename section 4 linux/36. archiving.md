# ARCHIVING

There are times when you need to archive files and directories.

- when you want to craete a backup
- or you have a backup and you want to restore from that.
- or you have some file that's coming from the internet or from somewhere else, it's in an archive format and you want to unarchive it

Let's say we want to archive the httpd logs

```
[root@centos ~]# cd /var/log

[root@centos log]# ls
anaconda  btmp    cron      ...     httpd       ...

```

Mostly we do archiving of log files to move it somewhere else so we can delete the log file and save disk space.

### 1. tar COMMAND

#### ARCHIVE A FILE OR DIRECTORY USING tar

```
[root@centos log]# tar -czvf httpd_15112025.tar.gz httpd

httpd/
httpd/error_log
httpd/access_log
```

##### ARCHIVE NAMING CONVENTION
```
httpd_15112025.tar.gz

httpd: file name
15112025: timestamp
tar: tarball
gz: it was compressed with the z option gunzip
```

If we list the log directory we should see the archived file
```
[root@centos log]# ls
anaconda  ...    httpd_15112025.tar.gz 
```

We can also confirm the file type. We see it's a gzip compressed data
```
[root@centos log]# file httpd_15112025.tar.gz

httpd_15112025.tar.gz: gzip compressed data, from Unix, original size modulo 2^32 10240
```

#### UNARCHIVE A FILE OR DIRECTORY
```
[root@centos log]# mv httpd_15112025.tar.gz /tmp

[root@centos log]# cd /tmp
[root@centos tmp]# ls

httpd_15112025.tar.gz    ...
```

Extract the archive in current directory
```
[root@centos tmp]# tar -xzvf httpd_15112025.tar.gz

httpd/
httpd/error_log
httpd/access_log

[root@centos tmp]# ls

httpd       systemd-private-23fb9715ebec489d803dcea1cb6e0889-chronyd.service-6FbRZr  ...
```

EXtract the archive to another directory
```
[root@centos tmp]# tar -xzvf httpd_15112025.tar.gz -C /opt/

httpd/
httpd/error_log
httpd/access_log

[root@centos tmp]# ls /opt/

httpd  VBoxGuestAdditions-7.0.14
[root@centos tmp]#
```

tar is a legacy old archiving command of linux, and it is still used. Ther are lots of options for it

See mor tar options
```
[root@centos tmp]# tar --help
```

### 2. zip COMMAND

#### ARCHIVE A FILE OR DIRECTORY USING zip

```
[root@centos log]# zip -r httpd_15112025.zip httpd

adding: httpd/ (stored 0%)
adding: httpd/error_log (deflated 78%)
adding: httpd/access_log (stored 0%)

[root@centos tmp]# ls

httpd   ...     httpd_15112025.zip 
```

#### UNARCHIVE A FILE OR DIRECTORY USING zip
```
[root@centos tmp]# rm -rf httpd

[root@centos tmp]# unzip httpd_15112025.zip

Archive:  httpd_15112025.zip
   creating: httpd/
  inflating: httpd/error_log
 extracting: httpd/access_log
```


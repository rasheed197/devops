# SUDO COMMAND

Sudo gives powerto a normal user to execute commands which is owned by root user

If a normal user has already full sudoers privilege, it can become a root user anytime.

Only a normal user with sudo privilege can use the sudo command

### 1. Change from normal user to root user
```
sudo -i
```

### 2. Give a normal user sudo privilege (Method 1)
This method is not recommended, use method 2

#### Step 1 Editing the sudoers file (/etc/sudoers)

This file has no write permission.
```
[root@centos ~]# ls -l /etc/sudoers

-r--r-----. 1 root root 4328 Jan 24  2024 /etc/sudoers
```

So the only way to edit it is to open the file `/etc/sudoers` in write mode in vim editor
```
$ visudo /etc/sudoers
```

#### Step 2
Inside vim editor search for `root` and add a new user e.g `aws` below

It would look something like this
```
## Allow root to run any commands anywhere
root    ALL=(ALL)       ALL
aws     ALL=(ALL)       ALL
```
Now `aws` user can run the sudo command

Whenever you use the `sudo` command as user `aws`, it will ask for your password.

If you don't want to be asked for password add `NOPASSWD` to the `aws` user in `/etc/sudoers` file
```
## Allow root to run any commands anywhere
root    ALL=(ALL)       ALL
aws     ALL=(ALL)       NOPASSWD: ALL
```

If you make a syntax error in /etc/sudoers file and try to save it, it will find there's a syntax error in this file and it's going to prompt you that `what now?`

So you have to say `e` to edit it back
```
[root@centos ~]# visudo

>>> /etc/sudoers: syntax error near line 9 <<<
what now? e
```

When you make this sort of error you'll no longer be able to do sudo, until you fix the file. 

To fix the file you'll need to provide root password, which only the admin has.

So this method is not recommended.

### 3. Give a normal user sudo privilege (Method 2)
```
[root@centos ~]# cd /etc/sudoers.d/
[root@centos sudoers.d]#
```
You will see there's a file called `vagrant`, 
```
[root@centos sudoers.d]# ls

vagrant
```
and it has the content below
```
[root@centos sudoers.d]# cat vagrant

%vagrant ALL=(ALL) NOPASSWD: ALL
```
Like that, you can create your own copy, and edit the file
```
[root@centos sudoers.d]# cp vagrant devops

[root@centos sudoers.d]# vim devops
```
Change the `vagrant` group to `devops`, and save.

To add a group you use `%`
```
%devops ALL=(ALL) NOPASSWD: ALL
```
Now any user that belong to devops group can do sudo.

You can also add the username there instead of group, e.g to add an `aws` user do

```
aws ALL=(ALL) NOPASSWD: ALL
```

This is much safer compare to directly editting the sudoers file.

### 4. Log out from a user account
```
exit
```


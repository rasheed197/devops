# USERS AND GROUPS

Users and groups are used to control access to files and resources

Users login to the system by supplying their username and password

Every file on the system is owned by a user and associated with a group

Every process has an owner and group affiliation, and can only access the resources its owner or group can access

Every user of the system is assigned a unique user ID number (the UID)

Users name and UID are stored in /etc/passwd

User's password is stored in /etc/shadow in encrypted form

User's are assigned a home directory and a program that is run when they login (usually a shell)

Users cannot read, write, or execute each other's files without permission


## TYPES OF USER
```
    TYPE            EXAMPLE             USER ID         GROUP ID            HOME DIR            SHELL
                                        (ID)            (GID)   
------------------------------------------------------------------------------------------------------------------
1.  ROOT            root                0               0                   /root               /bin/bash

2.  REGULAR         imran, vagrant      1000 to         1000 to             /home/username      /bin/bash
                                        60000           60000

3.  SERVICE or      ftp, ssh,           1 to 999        1 to 999            /var/ftp etc        /sbin/nologin
    SYSTEM          apache
```

### 1. view the /etc/passwd file
```
[root@centos ~]# cat /etc/passwd

```

### 2. view a single line of the /etc/passwd file
```
[root@centos ~]# head -1 /etc/passwd

root:x:0:0:root:/root:/bin/bash
```

There are 7 columns in total

```
root:x:0:0:root:/root:/bin/bash

root: username 
x: means there's a link to a shadow file. Shadow file will hold the password encypted
0: user ID
0: group ID
root: comment
/root: home directory of the root user
/bin/bash: login shell
```

### 3. check the group file
```
[root@centos ~]# cat /etc/group

root:x:0:
bin:x:1:
vagrant:x:1000:vagrant
```

```
vagrant:x:1000:vagrant

vagrant: group
x: means there's a link to a shadow file. Shadow file will hold the password encypted
1000: group ID
vagrant: user that belong to the grop
```

### 3. get info about a user
```
id username
```

### 4. Add a user
This would also create a primary group with same name as the user, and add the user to that group.
```
useradd ansible

useradd jenkins

useradd aws
```

### 5. View the user
```
tail -4 /etc/passwd

tail -4 /etc/group
```

### 6. Create a group
```
groupadd devops
```

### 7. Add the users to the devops group
method 1
```
usermod -aG devops ansible
```
method 2
```
vim /etc/group

# add the users to the "devops" group and save
devops:x:1004:ansible,jenkins,aws
```
Normal users can't login to these users because they have no password set. 

### 8. Set or reset user password
```
passwd ansible

passwd aws

passwd jenkins
```

### 9. Swich to another user
Being a root user, you need no passwd to access other user
```
# switch to ansible
su - ansible
```

### 10. Log out of a user 
```
exit
```

### 11. See users that logged-in to the system last
```
last
```

### 13. See other logged in users
```
who
```

### 14. See who you're logged in as
```
whoami
```

### 15. List all open file by aws
If no files show, that means aws user is logged out
```
lsof -u aws
```

### 16. Delete aws user but leave its home directoory
```
userdel aws
```

### 17. Delete aws user as well as its home directoory
```
userdel -r aws
```

### 18. Delete devops group
```
groupdel devops
```
